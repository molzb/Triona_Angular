<!DOCTYPE html>
<html>
	<head>
		<title>Calendar</title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width">

		<script type="text/javascript" src="js/angular.js"></script>
		<script type="text/javascript" src="js/jquery.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/moment-with-locales.js"></script>
		<script type="text/javascript" src="js/bootstrap-datetimepicker.js"></script>
		<script type="text/javascript" src="js/holidaysController.js"></script>

		<link href="css/bootstrap.min.css" type="text/css" rel="stylesheet">
		<link href="css/bootstrap-datetimepicker.css" type="text/css" rel="stylesheet">
		<link href="css/triona.css" type="text/css" rel="stylesheet">

		<style type="text/css">
			#calendar table { width: 99%; }
			#calendar table td, #calendar table th { padding: 5px;  }
			#calendar table td, #calendar table th { text-align: right; }
			#calendar table td.today { background: #fcf8e3; }
			#calendar table .red { color: red; font-weight: bold; }
			#calendar table .outOfMth { color: #dddddd; }
			#calendar h3 { text-align: center; }

			#listHolidays, #divExistingHolidays { margin-left: 0; }
		</style>
	</head>
	<body>

		<div class="container" ng-app="holidayApp" ng-controller="holidayCtrl">
			<h1 class="page-header">Holidays</h1>

			<div class="row">
				<div class="btn-group col-md-4" role="group">
					<button type="button" class="btn btn-primary" ng-click="chgYear(-1)">&lt;</button>
					<button type="button" class="btn btn-default" ng-click="gotoToday()">Today</button>
					<button type="button" class="btn btn-primary" ng-click="chgYear(1)">&gt;</button>
				</div>
			</div>

			<div class="row">&nbsp;</div>
			<div id="listHolidays" class="row">
				<div class="col-md-4 alert alert-success">
					<b>Urlaub in {{year}}: </b>{{me.holiday2015}} Tage
				</div>
				<div class="col-md-4 alert alert-success">
					<b>Genommen in {{year}}: </b>{{takenDays}} Tage
				</div>
				<div class="col-md-4 alert" ng-class="remainingDays > 0 ? 'alert-success' : 'alert-danger'">
					<b>Resturlaub:</b>			{{remainingDays}} Tage
				</div>
			</div>

			<div class="row">&nbsp;</div>
			<form class="row" action="PutServlet">
				<input type="hidden" name="sqlType" value="INSERT"/>
				<input type="hidden" name="type" value="holidays"/>
				<input type="hidden" name="employeeId" value="4"/>
				<div class="col-md-3">
					<div class="input-group date" id="datepickerFrom">
						<input id="fromDate" name="fromDate" type="text" class="form-control" ng-model="from" ng-blur="updateFrom()"
							   placeholder="First day of your vacation"/>
						<span class="input-group-addon">
							<span class="glyphicon glyphicon-calendar"></span>
						</span>
					</div>
				</div>
				<div class="col-md-3">
					<div class="input-group date" id="datepickerTo">
						<input id="toDate" name="toDate" type="text" class="form-control" ng-model="to" ng-blur="updateTo()"
							   placeholder="Last day of your vacation" />
						<span class="input-group-addon">
							<span class="glyphicon glyphicon-calendar"></span>
						</span>
					</div>
				</div>
				<div class="col-md-2">
					<span>Werktage:</span><span class="label label-default" ng-bind="workingDays"></span>
					<input type="hidden" name="workingDays" id="workingDays" ng-value="workingDays"/>
				</div>
				<div class="col-md-3">
					<div class="control-group">
						<a class="btn btn-warning" href="/Triona_Angular">Cancel</a>
						<button type="submit" class="btn btn-success">Save</button>
						<button type="reset"  ng-click="reset()" class="btn btn-danger">Reset</button>
					</div>
				</div>
			</form>

			<!-- Tabelle mit bestehendem Urlaub -->
			<div class="row" ng-show="myHolidays.length > 0">&nbsp;</div>
			<div id="divExistingHolidays" class="row" ng-show="myHolidays.length > 0">
				<table id="tblExistingHolidays" class="table-bordered table table-striped table-hover">
					<thead>
						<tr>
							<th>From</th>
							<th>To</th>
							<th>Workdays</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="h in myHolidays">
							<td>{{h.from}}</td>
							<td>{{h.to}}</td>
							<td>{{h.workingDays}}</td>
						</tr>
					</tbody>
				</table>
			</div>

			<!-- Calendar for the year -->
			<div id="calendar" class="row">
				<div class="col-md-4" ng-repeat="m in months">
					<h3 ng-click="initMonth($index)">{{m + ' ' + year}}</h3>
					<table id="{{m}}" class="table-bordered">
						<thead>
							<tr>
								<th>Mo</th>
								<th>Di</th>
								<th>Mi</th>
								<th>Do</th>
								<th>Fr</th>
								<th class="red">Sa</th>
								<th class="red">So</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td> </td> <td></td> <td></td> <td></td> <td></td> <td class="red"></td> <td class="red"></td>
							</tr>
							<tr>
								<td></td> <td></td> <td></td> <td></td> <td></td> <td class="red"></td> <td class="red"></td>
							</tr>
							<tr>
								<td></td> <td></td> <td></td> <td></td> <td></td> <td class="red"></td> <td class="red"></td>
							</tr>
							<tr>
								<td></td> <td></td> <td></td> <td></td> <td></td> <td class="red"></td> <td class="red"></td>
							</tr>
							<tr>
								<td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td>
							</tr>
							<tr>
								<td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</body>
</html>
